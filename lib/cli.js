#!/usr/bin/env node
const program=require("commander"),PKG=require("../package.json"),{download:download,dict:dict,print:print,calc:calc,date:date,remote:remote,os:os,regular:regular}=require("./index");async function queryByDictionary(){const r=program.args.slice(1);var o=r.join(" "),{ok:i,msg:o}=await dict.Query(o);i?print.Message(o):print.Error(o)}function fmtTs(){var[r]=program.args.slice(1),{ok:o,msg:r}=date.FmtTimestamp(r);o&&print.Message(r)}function remoteFunc(r){!r.proverbs&&r.bing?([r]=program.args.slice(2),remote.GetBingImgList(r)):remote.GetProverbs()}function osFunc(r){r.ipv4?os.GetIp(4):r.ipv6?os.GetIp(6):os.GetOsInfo()}program.version(PKG.version,"-v, -version"),program.command("help",{isDefault:!0}).description("帮助").action(()=>program.outputHelp()),program.command("init").description("初始化模板").action(download.InitTemplate),program.command("q <word|expressions>").description("翻译,查询中|英文单词，词句").action(queryByDictionary),program.command("ts [timestamp]").description("格式化时间戳,默认查询当前时间").action(fmtTs),program.command("calc").alias("c").description("计算器").action(()=>calc.Calc(!0)),program.command("remote").alias("r").description("远程获取, default: 获取一言数据").option("-p, --proverbs","箴言、言语、格言").option("-b, --bing [page]","获取必应壁纸列表 [page]页数").action(remoteFunc),program.command("os").description("获取系统参数").option("-ip, --ipv4","ipv4信息").option("-ip6, --ipv6","ipv6信息").action(osFunc),program.command("regular").alias("reg").description("获取常用正则表达式").action(regular.GetRegs),program.parse(process.argv);