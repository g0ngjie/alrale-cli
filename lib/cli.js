#!/usr/bin/env node
const program=require("commander"),PKG=require("../package.json"),{template,dict,print,calc,date,remote,os,regular,byte,shell,pipe,website,api_doc,color,git}=require("./index");async function queryByDictionary(){const o=program.args.slice(1);var i=o.join(" "),{ok:e,msg:i}=await dict.Query(i);e?print.Message(i):print.Error(i)}function fmtTs(){var[o]=program.args.slice(1),{ok:i,msg:o}=date.FmtTimestamp(o);i&&print.Message(o)}function remoteFunc(o){!o.proverbs&&o.bing?([o]=program.args.slice(2),remote.GetBingImgList(o)):remote.GetProverbs()}function osFunc(o){o.ipv4?os.GetIp(4):o.ipv6?os.GetIp(6):os.GetOsInfo()}async function shellFunc(o){"npm"===o.ls&&shell.ShowGlobalNpm()}function pipeFunc(o){if(o.table)return pipe.ShowTable();if(o.list)return pipe.Show();var[o]=program.args.slice(1);o&&pipe.GetCMD(o)}async function openFunc(o,i){if(i.clear)return website.Clear();await website.SyncConfig(),i.fetch?website.RemoteFetch():o?website.Open(o):i.t&&website.ShowAll()}function apiDocFunc(o){var{yapi:i,swagger:o}=o;i?api_doc.FormatYapi(i):o&&api_doc.FormatSwagger(o)}function gitFunc(o){var{list:o}=o;return o?git.EmojiList():git.EmojiTable()}program.version(PKG.version,"-v, -version"),program.command("help",{isDefault:!0}).description("帮助").action(()=>program.outputHelp()),program.command("init").description("初始化模板").action(template.InitTemplate),program.command("q <word|expressions>").description("翻译,查询中|英文单词，词句").action(queryByDictionary),program.command("ts [timestamp]").description("格式化时间戳,默认查询当前时间").action(fmtTs),program.command("calc").alias("c").description("计算器").action(()=>calc.Calc(!0)),program.command("remote").alias("r").description("远程获取, default: 获取一言数据").option("-p, --proverbs","箴言、言语、格言").option("-b, --bing [page]","获取必应壁纸列表 [page]页数").action(remoteFunc),program.command("os").description("获取系统参数").option("-ip, --ipv4","ipv4信息").option("-ip6, --ipv6","ipv6信息").action(osFunc),program.command("regular").alias("reg").description("获取常用正则表达式").action(regular.GetRegs),program.command("byte").description("字节转换").action(byte.ByteFmt),program.command("cmd").description("shell 操作").option("-l, --ls [args]","查询").action(shellFunc),program.command("pipe").alias("p").option("-l, --list","查看所有命令 (| grep [option])").option("-t, --table","表格查看所有命令").description("管道符常用命令 (| xargs [options] <command>)").action(pipeFunc),program.command("open [keywords]").alias("o").option("-t","查看所有").option("-f, --fetch","远端获取最新").option("-c, --clear","清空本地用户配置信息").description("常用网站\ncommand:\n[al o -t 查看所有]\n[al o gitee 打开gitee]").action(openFunc),program.command("doc").option("-y, --yapi <file>","格式化yapi").option("-s, --swagger <file>","格式化swagger").description("json文件 格式化接口文档").action(apiDocFunc),program.command("color").description("常用颜色Hex表").action(color.ColorTable),program.command("git").option("-l, --list","查看所有 (| grep [args])").description("emoji").action(gitFunc),program.parse(process.argv);