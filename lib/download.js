#!/usr/bin/env node
const download=require("download-git-repo"),path=require("path"),rimraf=require("rimraf"),ora=require("ora"),util=require("./utils"),print=require("./print");function downloadTemplate(e,r){var t=path.join(process.cwd(),r);return rimraf.sync(t,{}),new Promise((t,a)=>{download(e,r,{clone:!0},e=>{e?a(e):t(r)})})}function koaBasicServices(e){return downloadTemplate("https://gitee.com:gjwork/koa2-basic-services-template#master","[default]"===e?"koa2-basic-services-template":e)}function vue2BasicElementUI(e){return downloadTemplate("https://gitee.com:gjwork/vue2-basic-element-ui-template#master","[default]"===e?"vue2-basic-element-ui-template":e)}exports.InitTemplate=async function(){var{ok:e,msg:t,data:a}=await util.Inquirer([{type:"list",message:"模板选择",name:"template",choices:["koa2-basic-template","vue2-basic-element-ui-template"]},{type:"input",message:"模板名称",name:"custom",default:"[default]"}]);if(!e)return print.Error(t);const r=ora("Loading...").start();r.color="cyan",r.text="正在安装...";var{template:a,custom:i}=a;let s=[];switch(a){case"koa2-basic-template":var n=await koaBasicServices(i);s=[`cd ${n}`,"yarn 或者 npm install 安装依赖","yarn dev 启动开发环境"];break;case"vue2-basic-element-ui-template":n=await vue2BasicElementUI(i);s=[`cd ${n}`,"yarn 或者 npm install 安装依赖","yarn serve 启动开发环境"]}r.succeed("安装完成!"),r.stop(),print.Messages(s)};