#!/usr/bin/env node
const superagent=require("superagent"),{GetTable:GetTable}=require("./utils"),url="http://fanyi.youdao.com/openapi.do?keyfrom=toaijf&key=868480929&type=data&doctype=json&version=1.1";exports.Query=function(o){return new Promise(r=>{superagent.get(url).query({q:o}).end((e,t)=>{e&&r({ok:!1,msg:"对不起,再试一次"});t=JSON.parse(t.text);let a={};t.basic?a[o]=t.basic.explains:t.translation?a[o]=t.translation:r({ok:!1,msg:"查询异常"});t=GetTable([a]);r({ok:!0,msg:t})})})};