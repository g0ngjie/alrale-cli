#!/usr/bin/env node
const superagent=require("superagent"),{GetTable:GetTable}=require("./utils"),ora=require("ora"),url="http://fanyi.youdao.com/openapi.do?keyfrom=toaijf&key=868480929&type=data&doctype=json&version=1.1";exports.Query=function(s){return new Promise(o=>{const a=ora().start();a.color="cyan",superagent.get(url).query({q:s}).end((e,t)=>{a.stop(),e&&o({ok:!1,msg:"对不起,再试一次"});t=JSON.parse(t.text);let r={};t.basic?r[s]=t.basic.explains:t.translation?r[s]=t.translation:o({ok:!1,msg:"查询异常"});t=GetTable([r]);o({ok:!0,msg:t})})})};