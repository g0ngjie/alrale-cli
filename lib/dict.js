#!/usr/bin/env node
const Table=require("cli-table2"),superagent=require("superagent"),url="http://fanyi.youdao.com/openapi.do?keyfrom=toaijf&key=868480929&type=data&doctype=json&version=1.1";exports.Query=function(a){return new Promise(r=>{superagent.get(url).query({q:a}).end((e,t)=>{e&&r({ok:!1,msg:"对不起,再试一次"});t=JSON.parse(t.text);let n={};t.basic?n[a]=t.basic.explains:t.translation?n[a]=t.translation:r({ok:!1,msg:"查询异常"});const o=new Table;o.push(n),r({ok:!0,msg:o.toString()})})})};